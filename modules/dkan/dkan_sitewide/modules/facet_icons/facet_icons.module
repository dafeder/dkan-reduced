<?php

/**
 * Implements hook_facetapi_widgets().
 */
function facet_icons_facetapi_widgets() {
  return array(
    'terms' => array(
      'handler' => array(
        'label' => t('Term Icon'),
        'class' => 'FacetapiTermIcon',
        'query types' => array('term', 'date'),
      ),
    ),
    'content_types' => array(
      'handler' => array(
        'label' => t('Content Type Icon'),
        'class' => 'FacetapiContentTypeIcon',
        'query types' => array('term', 'date'),
      ),
    ),
  );
}

/**
 * Implements hook_theme().
 */
function facet_icons_theme() {
  return array(
    'dkan_icons_search_icons' => array(
      'variables' => array('class' => array(), 'type' => NULL),
    ),
  );
}

/**
 * Theme function implementation.
 */
function theme_dkan_icons_search_icons($variables) {
  $attributes = (isset($variables['attributes']))? $variables['attributes'] : array();
  $classes = (isset($variables['class']))? $variables['class'] : array();
  $classes[] = 'icon-dkan-' .  $variables['type'];
  $classes = implode(' ', $classes);
  return '<span class="icon-dkan ' . $classes . '" '. drupal_attributes($attributes) .'></span>';
}

/**
 * Implements hook_preprocess_page().
 */
function facet_icons_preprocess_page(&$variables) {
  drupal_add_css(drupal_get_path('module', 'facet_icons') . '/assets/css/dkan-dataset-search-icons.css','module' ,'all' , false);
}